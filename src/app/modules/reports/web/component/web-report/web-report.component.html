<div class="container mt-4">
  <div class="row mx-2">
    <div class="col">
      <button class="btn btn-primary float-right my-2" (click)="back()">
        <i class="fa fa-arrow-left ml-1 fa-1x mr-1" aria-hidden="true"></i>
        <span class="my-auto">Back</span>
      </button>
    </div>
  </div>
  <div class="row" *ngIf="isLoaded">
    <div class="col-md-12 col-sm-12">
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-md-6 col-sm-12 mb-2">
              <!-- Transactions  table -->
              <div class="card mb-1 w-100 h-100 table-responsive-lg">
                <div class="card-header">
                  <p class="sibasi-heading1">All transactions</p>
                </div>
                <table class="table text-center table-borderless table-hover">
                  <thead class="thead-light">
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">Customer</th>
                      <th scope="col">Total</th>
                      <th scope="col">Payment</th>

                      <th scope="col">Status</th>
                    </tr>
                  </thead>
                  <tbody
                    *ngFor="let transaction of transactions; let i = index"
                  >
                    <tr class="item">
                      <th scope="row">
                        {{ i + 1 }}
                      </th>
                      <td>
                        <span
                          (click)="viewTransactionDetails(transaction)"
                          class="text-primary btn"
                        >
                          {{ transaction?.customer?.name }}</span
                        >
                      </td>
                      <td>{{ transaction.total | currency: "Ksh " }}</td>
                      <td>{{ transaction.paymentTerm }}</td>
                      <td>{{ transaction.status }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="col-md-6 col-sm-12 mb-2">
              <!-- table -->
              <div class="card mb-1 w-100 h-100 table-responsive-lg">
                <div class="card-header">
                  <p class="sibasi-heading1">All Categories</p>
                </div>
                <table class="table text-center table-borderless table-hover">
                  <thead class="thead-light">
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">Name</th>
                      <th scope="col">Items</th>
                    </tr>
                  </thead>
                  <tbody *ngFor="let category of categories; let i = index">
                    <tr class="item">
                      <th scope="row">
                        {{ i + 1 }}
                      </th>
                      <td>
                        <span
                          (click)="viewCategory(category)"
                          class="text-primary btn"
                        >
                          {{ category.name }}</span
                        >
                      </td>
                      <td>{{ category.numberOfItems }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- map -->
          <!-- <div class="col-md-12 col-sm-12">
            <div class="card shadow-sm">
              <div class="map-frame">
                <div id="map" class="mw-100 mh-100"></div>
              </div>
            </div>
          </div> -->
        </div>
        <div class="col-12">
          <div class="row">
            <div class="col-md-6 col-sm-12 mb-2">
              <div class="table-responsive-lg card mb-1 w-100 h-100">
                <div class="card-header">
                  <p class="sibasi-heading1">All Customers</p>
                </div>
                <table
                  class="table text-center table-borderless table-hover"
                  *ngIf="customers.length != 0"
                >
                  <thead class="thead-light">
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">Name</th>
                      <th scope="col">Country</th>
                      <th scope="col">Region</th>
                      <th scope="col">Telephone</th>
                    </tr>
                  </thead>
                  <tbody *ngFor="let customer of customers; let i = index">
                    <tr>
                      <td>
                        <span class="my-auto">{{ i + 1 }}</span>
                      </td>
                      <td>
                        <span
                          class="btn text-primary btn-link"
                          (click)="viewCustomer(customer)"
                          >{{ customer.name }}</span
                        >
                      </td>
                      <td>
                        <span class="mx-1">
                          <i
                            class="text-center flag-icon"
                            [ngClass]="
                              'flag-icon-' + (customer.country | lowercase)
                            "
                          >
                          </i>
                        </span>
                        {{ customer.country }}
                      </td>
                      <td>
                        {{ customer.region }}
                      </td>
                      <td>
                        <span class="btn" (click)="viewCustomer(customer)"
                          >{{ customer.phoneNumber }}
                        </span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div
              class="
                col-md-6 col-sm-12
                d-md-flex
                justify-content-between
                mb-2
                my-auto
              "
            >
              <div class="col-6">
                <div class="card dashboard-product d-block text-center">
                  <span>Total Sales</span>
                  <p class="lead">
                    <i
                      class="fa fa-dollar text-primary h1"
                      aria-hidden="true"
                    ></i>
                  </p>
                  <p class="text-success">
                    {{ transactionSummary.totalSales | currency: "Ksh " }}
                  </p>
                </div>
              </div>
              <div class="col-6">
                <div class="card dashboard-product d-block text-center">
                  <span>Transactions</span>
                  <p class="lead">
                    <i
                      class="fa fa-bank text-primary h1"
                      aria-hidden="true"
                    ></i>
                  </p>
                  <p class="h4 text-success">
                    {{ transactionSummary.totalNumberOfTransactions }}
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <div class="card w-100 h-100 mt-4" *ngIf="!isLoaded">
        <p class="card-text text-center my-auto">
          Generating your report ......
        </p>
      </div>
    </div>
  </div>
</div>
